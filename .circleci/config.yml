version: 2.1

orbs:
  codacy: codacy/codacy@1.0.0

jobs:
  build:
    docker:
      - image: maven:3.6-jdk-11
    steps:
      - checkout
      - run: mvn clean install
      - codacy/upload:
          coverage_report: target/site/jacoco/jacoco.xml
          api_token: t2xwSWdp3BmLbXuahtSn

workflows:
  version: 2
  build_and_analyze:
    jobs:
      - build
